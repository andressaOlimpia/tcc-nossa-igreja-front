"use strict";(self.webpackChunknossa_igreja_web=self.webpackChunknossa_igreja_web||[]).push([[190],{6190:(N,m,u)=>{u.r(m),u.d(m,{GruposComunhaoModule:()=>M});var p=u(9808),i=u(1813),d=u(8208),f=u(3012),o=u(7587);let C=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["grupos-comunhao-adm-app-root"]],decls:1,vars:0,template:function(r,n){1&r&&o._UZ(0,"router-outlet")},directives:[i.lC],encapsulation:2}),e})();var A=u(2313),l=u(9783),g=u(6177),s=u(7773),c=u(845),h=u(9114);function T(e,t){1&e&&(o.TgZ(0,"div",15),o._uU(1,"N\xe3o h\xe1 participantes inscritos"),o.qZA())}function q(e,t){if(1&e&&(o.TgZ(0,"div",15),o._uU(1),o.qZA()),2&e){const r=t.$implicit;o.xp6(1),o.Oqu(null==r?null:r.nomeCompleto)}}const G=function(){return{width:"50vw"}};let U=(()=>{class e{constructor(r,n,a,R,O){this.activatedRoute=r,this.sanitizer=n,this.messageService=a,this.confirmationService=R,this.grupoComunhaoService=O,this.grupoComunhao=this.activatedRoute.snapshot.data.grupoComunhao,console.log(this.grupoComunhao),this.participantes=this.grupoComunhao.participantes,this.grupoId=this.grupoComunhao.id,this.enderecoMap=this.sanitizer.bypassSecurityTrustResourceUrl("https://www.google.com/maps/embed/v1/search?q="+this.getEnderecoCompleto()+"&key=AIzaSyAcnvfV-BuB5UHTLwBHDRnH3frxF2YxeTM")}getEnderecoCompleto(){return this.grupoComunhao.endereco.logradouro+", "+this.grupoComunhao.endereco.numero+" - "+this.grupoComunhao.endereco.bairro+", "+this.grupoComunhao.endereco.cidade+" - "+this.grupoComunhao.endereco.estado}fazerInscricaoNoGrupo(){this.verificaSeGrupoLotado()?this.getMensagemAviso():this.concluirInscricao()}verificaSeGrupoLotado(){var r,n,a;return(null===(r=this.grupoComunhao)||void 0===r?void 0:r.maxParticipantes)<=(null===(a=null===(n=this.grupoComunhao)||void 0===n?void 0:n.participantes)||void 0===a?void 0:a.length)}getMensagemAviso(){this.messageService.add({severity:"warn",summary:"Grupo lotado",detail:"Entre em contato com a lideran\xe7a"})}concluirInscricao(){this.confirmationService.confirm({message:"Deseja confirmar inscri\xe7\xe3o para esse grupo?",header:"Confirma\xe7\xe3o de inscri\xe7\xe3o",icon:"pi pi-info-circle",accept:()=>{let r={id:Number(localStorage.getItem("idUsuario"))};this.grupoComunhaoService.incluirParticipante(this.grupoId,r).subscribe(n=>{this.participantes=n.participantes,this.messageService.add({severity:"success",summary:"Eba!",detail:"Inscri\xe7\xe3o feita com sucesso"})})}})}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(i.gz),o.Y36(A.H7),o.Y36(l.ez),o.Y36(l.YP),o.Y36(g.L))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-inscricao-grupo"]],decls:39,vars:18,consts:[[1,"surface-card","p-4","main-container"],["position","bottom-left","sticky","true"],[1,"text-left","mb-3"],[1,"w-full","flex","justify-content-center","pb-5"],["pButton","","pRipple","","icon","pi pi-check","label","Quero participar",1,"p-button-rounded",3,"click"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],["width","100%","height","350","frameborder","0","allowfullscreen","",2,"border","0","padding-bottom","10px",3,"src"],[1,"border-2","border-dashed","overflow-auto","surface-border","border-round","p-3"],[1,"flex","align-items-center","pb-3","flex-wrap"],[1,"text-700","w-6","font-medium"],[1,"w-full","flex-order-1"],[1,"text-700","w-6","md:w-2","pb-2","font-medium"],[1,"flex","align-items-center","flex-wrap"],["class","p-1 w-full flex-order-1",4,"ngIf"],["class","p-1 w-full flex-order-1",4,"ngFor","ngForOf"],[1,"p-1","w-full","flex-order-1"]],template:function(r,n){1&r&&(o.TgZ(0,"div",0),o._UZ(1,"p-toast",1),o.TgZ(2,"h2",2),o._uU(3),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"button",4),o.NdJ("click",function(){return n.fazerInscricaoNoGrupo()}),o.qZA(),o._UZ(6,"p-confirmDialog",5),o.qZA(),o._UZ(7,"iframe",6),o.TgZ(8,"div",7),o.TgZ(9,"li",8),o.TgZ(10,"div",9),o._uU(11,"Nome"),o.qZA(),o.TgZ(12,"div",10),o._uU(13),o.qZA(),o.qZA(),o.TgZ(14,"li",8),o.TgZ(15,"div",9),o._uU(16,"Dia da semana"),o.qZA(),o.TgZ(17,"div",10),o._uU(18),o.qZA(),o.qZA(),o.TgZ(19,"li",8),o.TgZ(20,"div",9),o._uU(21,"Hor\xe1rio"),o.qZA(),o.TgZ(22,"div",10),o._uU(23),o.qZA(),o.qZA(),o.TgZ(24,"li",8),o.TgZ(25,"div",9),o._uU(26,"Lider"),o.qZA(),o.TgZ(27,"div",10),o._uU(28),o.qZA(),o.qZA(),o.TgZ(29,"li",8),o.TgZ(30,"div",11),o._uU(31,"Endere\xe7o"),o.qZA(),o.TgZ(32,"div",10),o._uU(33),o.qZA(),o.qZA(),o.TgZ(34,"li",12),o.TgZ(35,"div",11),o._uU(36,"Participantes"),o.qZA(),o.YNc(37,T,2,0,"div",13),o.YNc(38,q,2,1,"div",14),o.qZA(),o.qZA(),o.qZA()),2&r&&(o.xp6(3),o.Oqu((null==n.grupoComunhao?null:n.grupoComunhao.nome)||"Grupo de comunh\xe3o"),o.xp6(3),o.Akn(o.DdM(17,G)),o.Q6J("baseZIndex",1e4),o.xp6(1),o.Q6J("src",n.enderecoMap,o.uOi),o.xp6(6),o.Oqu(null==n.grupoComunhao?null:n.grupoComunhao.nome),o.xp6(5),o.Oqu(null==n.grupoComunhao?null:n.grupoComunhao.diaSemana),o.xp6(5),o.Oqu(null==n.grupoComunhao?null:n.grupoComunhao.horario),o.xp6(5),o.Oqu(null==n.grupoComunhao||null==n.grupoComunhao.lider?null:n.grupoComunhao.lider.nomeCompleto),o.xp6(5),o.gL8(" ",null==n.grupoComunhao||null==n.grupoComunhao.endereco?null:n.grupoComunhao.endereco.logradouro,", ",null==n.grupoComunhao||null==n.grupoComunhao.endereco?null:n.grupoComunhao.endereco.numero,", ",null==n.grupoComunhao||null==n.grupoComunhao.endereco?null:n.grupoComunhao.endereco.bairro,", ",null==n.grupoComunhao||null==n.grupoComunhao.endereco?null:n.grupoComunhao.endereco.cidade,", ",null==n.grupoComunhao||null==n.grupoComunhao.endereco?null:n.grupoComunhao.endereco.estado," ",null==n.grupoComunhao||null==n.grupoComunhao.endereco?null:n.grupoComunhao.endereco.complemento," "),o.xp6(4),o.Q6J("ngIf",0==n.participantes.length||null==n.participantes),o.xp6(1),o.Q6J("ngForOf",n.participantes))},directives:[s.FN,c.Hq,h.Q,p.O5,p.sg],styles:[""]}),e})();var Z=u(6697),v=u(9142);function b(e,t){1&e&&(o.TgZ(0,"div",8),o.TgZ(1,"h3",9),o._uU(2,"Lista de grupos"),o.qZA(),o.qZA())}function y(e,t){1&e&&o._UZ(0,"p-tag",16),2&e&&o.Q6J("rounded",!0)}function I(e,t){1&e&&o._UZ(0,"p-tag",17),2&e&&o.Q6J("rounded",!0)}const L=function(e){return["/grupos-comunhao/inscricao/",e]};function w(e,t){if(1&e&&(o.TgZ(0,"tr"),o.TgZ(1,"td"),o.TgZ(2,"li",10),o.TgZ(3,"div",11),o._uU(4,"Grupo"),o.qZA(),o.TgZ(5,"div",12),o._uU(6),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"td"),o.TgZ(8,"li",10),o.TgZ(9,"div",11),o._uU(10,"Dia e hor\xe1rio"),o.qZA(),o.TgZ(11,"div",12),o._uU(12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"td"),o.TgZ(14,"li",10),o.TgZ(15,"div",11),o._uU(16,"L\xedder"),o.qZA(),o.TgZ(17,"div",12),o._uU(18),o.qZA(),o.qZA(),o.qZA(),o.TgZ(19,"td"),o.YNc(20,y,1,1,"p-tag",13),o.YNc(21,I,1,1,"p-tag",14),o.qZA(),o.TgZ(22,"td"),o._UZ(23,"button",15),o.qZA(),o.qZA()),2&e){const r=t.$implicit,n=o.oxw();o.xp6(6),o.Oqu(r.nome),o.xp6(6),o.AsE(" ",r.diaSemana,", ",r.horario,"h"),o.xp6(6),o.Oqu(null==r.lider?null:r.lider.nomeCompleto),o.xp6(2),o.Q6J("ngIf",n.verificaSeGrupoLotado(r)),o.xp6(1),o.Q6J("ngIf",!n.verificaSeGrupoLotado(r)),o.xp6(2),o.Q6J("routerLink",o.VKq(7,L,r.id))}}const x=[{path:"",component:C,canActivateChild:[f.N],children:[{path:"inscricao/:id",resolve:{grupoComunhao:d.M},component:U,data:{allowedRoles:["ROLE_ADMIN","ROLE_MEMBRO"]}},{path:"lista",component:(()=>{class e{constructor(r){this.grupoComunhaoService=r}ngOnInit(){this.grupoComunhaoService.consultarGruposComunhao().subscribe(r=>{this.grupos=r,console.log(this.grupos),this.totalRecords=r.length})}verificaSeGrupoLotado(r){return r.maxParticipantes<=r.participantes.length}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(g.L))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-lista-grupos"]],decls:9,vars:4,consts:[[1,"surface-card","p-4","main-container"],["position","bottom-left","sticky","true"],[1,"text-left","mb-3"],[1,"card"],["layout","grid",3,"value","paginator","rows","totalRecords"],["dt",""],["pTemplate","header"],["pTemplate","body"],[1,"flex","flex-column","md:flex-row","md:justify-content-between"],[1,"inline","text-center","mb-3"],[1,"flex","align-items-center","pb-3","flex-wrap"],[1,"text-600","w-full"],[1,"w-full","flex-order-1"],["icon","pi pi-exclamation-triangle","severity","warning","value","Lotado",3,"rounded",4,"ngIf"],["icon","pi pi-check","severity","success","value","Dispon\xedvel",3,"rounded",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-chevron-right",1,"p-button-text","p-button-lg",3,"routerLink"],["icon","pi pi-exclamation-triangle","severity","warning","value","Lotado",3,"rounded"],["icon","pi pi-check","severity","success","value","Dispon\xedvel",3,"rounded"]],template:function(r,n){1&r&&(o.TgZ(0,"div",0),o._UZ(1,"p-toast",1),o.TgZ(2,"h2",2),o._uU(3,"Grupos de comunh\xe3o"),o.qZA(),o.TgZ(4,"div",3),o.TgZ(5,"p-table",4,5),o.YNc(7,b,3,0,"ng-template",6),o.YNc(8,w,24,9,"ng-template",7),o.qZA(),o.qZA(),o.qZA()),2&r&&(o.xp6(5),o.Q6J("value",n.grupos)("paginator",!0)("rows",5)("totalRecords",n.totalRecords))},directives:[s.FN,Z.iA,l.jx,p.O5,v.V,c.Hq,i.rH],styles:[""]}),e})(),data:{allowedRoles:["ROLE_ADMIN","ROLE_MEMBRO"]}}]}];let E=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.Bz.forChild(x)],i.Bz]}),e})();var S=u(7556);let M=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[l.ez,S.e,p.uU,l.YP,d.M],imports:[[p.ez,i.Bz,c.hJ,s.EV,Z.U$,v.W,h.D,E]]}),e})()}}]);